(()=>{"use strict";function e(){let e=1,o=JSON.parse(localStorage.getItem("task_number"));for(document.getElementById("display-tasks").innerHTML="";e<=o;){if(localStorage.getItem(`${e}`)){let r=JSON.parse(localStorage.getItem(`${e}`));"Inbox"==r.project&&t("display-tasks",n(r))}e++}c().updateTasks(),c().deleteTask(),r()}function t(e,t){document.getElementById(e).appendChild(t)}function n(e){let t=document.createElement("div");!0===e.check&&(t.style.backgroundColor="cyan"),t.setAttribute("class","task-element"),t.setAttribute("id",`task-number-${e.task_number}`);let n=document.createElement("button");!0===e.check?n.innerHTML="":n.innerHTML='<span class="material-icons">\n        done\n        </span>',n.setAttribute("id",`check-${e.task_number}`),n.setAttribute("class","check");let r=document.createElement("div");r.setAttribute("id","title"),r.textContent=e.title;let o=document.createElement("div");o.setAttribute("id","description"),o.textContent=e.description;let c=document.createElement("div");c.setAttribute("id","duedate"),c.textContent=e.duedate;let a=document.createElement("div");a.setAttribute("id","priority"),a.textContent=e.priority;let u=document.createElement("button");u.setAttribute("id",`update-task-${e.task_number}`),u.setAttribute("class","updateTaskBtn"),u.innerHTML='<span class="material-icons" style="font-size:20px;">\n    edit\n    </span>';let l=document.createElement("button");return l.setAttribute("id",`close-task-${e.task_number}`),l.setAttribute("class","closeTaskBtn"),l.innerHTML='<span class="material-icons">\n    close\n    </span>',[n,r,o,c,a,u,l].forEach((e=>{t.appendChild(e)})),t}function r(){let t=1,n=c().getTaskNumber();document.querySelector("#clear-tasks").addEventListener("click",(r=>{for(;t<=n;)localStorage.getItem(`${t}`)&&localStorage.removeItem(`${t}`),t++;n=1,localStorage.setItem("task_number","1"),e()}))}class o{constructor(e,t,n,r,o,c,a="Inbox"){this.title=e,this.description=t,this.duedate=n,this.priority=r,this.check=o,this.task_number=c,this.project=a}}function c(){const t=document.querySelector("#task-container"),n=document.querySelector("#update-task-container");let c=1;function a(){return""!=document.querySelector("#update-task-container").querySelector("#task-title-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-description-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-due-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-priority-input").value&&""!=document.querySelector("#update-task-container").querySelector("#project-selection-input-2").value&&{title:document.querySelector("#update-task-container").querySelector("#task-title-input").value,description:document.querySelector("#update-task-container").querySelector("#task-description-input").value,duedate:document.querySelector("#update-task-container").querySelector("#task-due-input").value,priority:document.querySelector("#update-task-container").querySelector("#task-priority-input").value,project:document.querySelector("#update-task-container").querySelector("#project-selection-input-2").value}}function u(e){localStorage.setItem(`${e.task_number}`,JSON.stringify(e))}function l(){document.querySelectorAll(".closeTaskBtn").forEach((e=>{e.addEventListener("click",(t=>{let n=e.id.split("-")[2];document.getElementById(`task-number-${n}`)&&(document.getElementById(`task-number-${n}`).remove(),function(e){localStorage.removeItem(e)}(n))}))}))}function i(){document.querySelectorAll(".updateTaskBtn")&&document.querySelectorAll(".updateTaskBtn").forEach((e=>{e.addEventListener("click",(t=>{let r=e.id.split("-")[2];(function(e){let t=document.getElementById(e).querySelector("#title").textContent,n=document.getElementById(e).querySelector("#description").textContent,r=document.getElementById(e).querySelector("#duedate").textContent,o=document.getElementById(e).querySelector("#priority").textContent,c=function(e){let t=JSON.parse(localStorage.getItem(`${e}`));return{title:t.title,description:t.description,duedate:t.duedate,priority:t.priority,check:t.check,num:t.task_number,project:t.project}}(e.split("-")[2]).project;document.querySelector("#update-task-container").querySelector("#task-title-input").value=t,document.querySelector("#update-task-container").querySelector("#task-description-input").value=n,document.querySelector("#update-task-container").querySelector("#task-due-input").value=r,document.querySelector("#update-task-container").querySelector("#task-priority-input").value=o,document.querySelector("#update-task-container").querySelector("#project-selection-input-2").value=c})(`task-number-${r}`),n.classList.add("show"),document.querySelector("#update-submit-task").addEventListener("click",(e=>{!1!==a()?(function(e,t){let n=JSON.parse(localStorage.getItem(`${e}`));n.title=t.title,n.description=t.description,n.duedate=t.duedate,n.priority=t.priority,n.project=t.project,localStorage.setItem(`${e}`,JSON.stringify(n))}(r,a()),function(e){let t=JSON.parse(localStorage.getItem(`${e}`));document.querySelector(`#task-number-${e}`).querySelector("#title").textContent=t.title,document.querySelector(`#task-number-${e}`).querySelector("#description").textContent=t.description,document.querySelector(`#task-number-${e}`).querySelector("#duedate").textContent=t.duedate,document.querySelector(`#task-number-${e}`).querySelector("#priority").textContent=t.priority}(r),s(),p("update-task-container")):m("update-task-container")}))}))}))}function s(){n.classList.remove("show")}function d(){t.classList.remove("show")}function m(e){document.getElementById(e).querySelector("#error-message").textContent="Please enter all the fields"}function p(e){document.getElementById(e).querySelector("#error-message").textContent=""}function y(){document.querySelector("#clear-tasks").classList.add("show")}function k(){document.querySelectorAll(".check").forEach((e=>e.addEventListener("click",(t=>{let n=e.id.split("-")[1];document.getElementById(`task-number-${n}`).style["background-color"]="cyan",document.getElementById(`check-${n}`).textContent="",function(e){let t=JSON.parse(localStorage.getItem(`${e}`));t.check=!0,u(t)}(n)}))))}return l(),i(),document.querySelector("#add-taskBtn").addEventListener("click",(e=>{t.classList.add("show")})),document.querySelector("#cancel-task").addEventListener("click",(e=>{d()})),document.querySelector("#update-cancel-task").addEventListener("click",(e=>{s()})),setTimeout(k(),100),document.querySelector("#submit-task").addEventListener("click",(t=>{1==!!(document.querySelector("#task-title-input").value&&document.querySelector("#task-description-input").value&&document.querySelector("#task-due-input").value&&""!==document.querySelector("#task-priority-input").value&&""!==document.querySelector("#project-selection-input-1").value)?(u(function(){let e={title:document.querySelector("#task-title-input").value,task_description:document.querySelector("#task-description-input").value,task_due:document.querySelector("#task-due-input").value,task_priority:document.querySelector("#task-priority-input").value,project:document.querySelector("#project-selection-input-1").value},t=new o(e.title,e.task_description,e.task_due,e.task_priority,!1,c,e.project);return c++,localStorage.setItem("task_number",JSON.stringify(c)),t}()),d(),e(),i(),k(),y(),document.querySelector("#task-title-input").value="",document.querySelector("#task-description-input").value="",document.querySelector("#task-due-input").value="",document.querySelector("#task-priority-input").value="",document.querySelector("#project-selection-input-1").value="",p("task-container"),r()):m("task-container")})),y(),{updateTasks:i,deleteTask:l,getTaskNumber:function(){return JSON.parse(localStorage.getItem("task_number"))}}}!function(){const o=document.querySelector("#submit-name"),a=document.querySelector("#modal-container");function u(){document.querySelector("#name").innerText=localStorage.username}localStorage.getItem("username")?u():(a.classList.add("show"),o.addEventListener("click",(e=>{let t=document.querySelector("#name-input").value;""==t&&(t="Guest"),localStorage.setItem("username",`${t}`),u(),a.classList.remove("show")}))),e(),document.getElementById("inbox").addEventListener("click",(t=>{e()})),document.getElementById("today-tasks").addEventListener("click",(e=>{!function(){let e=1,o=JSON.parse(localStorage.getItem("task_number")),a=(new Date).toISOString().slice(0,10);for(document.getElementById("display-tasks").innerHTML="";e<=o;){if(localStorage.getItem(`${e}`)){let r=JSON.parse(localStorage.getItem(`${e}`));r.duedate==a&&t("display-tasks",n(r))}e++}c().updateTasks(),c().deleteTask(),r()}()})),document.getElementById("weekly-tasks").addEventListener("click",(e=>{!function(){let e=1,o=JSON.parse(localStorage.getItem("task_number")),a=function(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear(),o=[];for(let e=0;e<7;e++){let e=r+"-"+n+"-"+t;o.push(e),t=parseInt(t),t++}return o}();for(document.getElementById("display-tasks").innerHTML="";e<=o;){if(localStorage.getItem(`${e}`)){let r=JSON.parse(localStorage.getItem(`${e}`));r.duedate!=a[0]&&r.duedate!=a[1]&&r.duedate!=a[2]&&r.duedate!=a[3]&&r.duedate!=a[4]&&r.duedate!=a[5]&&r.duedate!=a[6]||t("display-tasks",n(r))}e++}c().updateTasks(),c().deleteTask(),r()}()})),r(),c(),function(){let e=[];function o(e){let t=document.createElement("button");return t.setAttribute("id","project-number-1"),t.setAttribute("class","project-title"),t.style.height="30px",t.innerHTML=`<span class="material-icons">bookmarks </span> ${e}`,t}function a(){document.getElementById("project-container").classList.remove("show")}function u(e){let n=document.createElement("option");n.textContent=e;let r=document.createElement("option");r.textContent=e,t("project-selection-input-1",n),t("project-selection-input-2",r)}!function(){if(localStorage.getItem("Projects")){document.getElementById("project-list").textContent="";let e=JSON.parse(localStorage.getItem("Projects"));for(let n=0;n<e.length;n++)t("project-list",o(e[n]))}}(),document.getElementById("cancel-project-Btn").addEventListener("click",(e=>{a()})),document.getElementById("add-projectBtn").addEventListener("click",(e=>{document.getElementById("project-container").classList.add("show")})),document.getElementById("clear-projects").addEventListener("click",(t=>{document.getElementById("project-list").textContent="",e=[],localStorage.removeItem("Projects"),function(){let e=document.querySelector("#project-selection-input-1").children;for(let t=e.length-1;t>1;t--)e.item(t).remove();let t=document.querySelector("#project-selection-input-2").children;for(let e=t.length-1;e>1;e--)t.item(e).remove()}()})),setTimeout((function(){if(localStorage.getItem("Projects")){let e=JSON.parse(localStorage.getItem("Projects"));for(let t=0;t<e.length;t++)u(e[t])}}),100),document.querySelectorAll(".project-title").forEach((e=>{e.addEventListener("click",(o=>{let a=JSON.parse(localStorage.getItem("task_number"));document.getElementById("display-tasks").textContent="";let u=e.textContent.replace("bookmarks  ",""),l=1;for(;l<=a;){if(localStorage.getItem(`${l}`)){let e=JSON.parse(localStorage.getItem(`${l}`));e.project==u&&t("display-tasks",n(e))}l++}c().updateTasks(),c().deleteTask(),r()}))})),document.querySelector("#add-projectBtn").addEventListener("click",(n=>{document.querySelector("#add-project-Btn").addEventListener("click",(n=>{""!=document.getElementById("project-name").value==1?(t("project-list",o(document.getElementById("project-name").value)),function(){let t=document.getElementById("project-name").value;e.push(t),localStorage.setItem("Projects",JSON.stringify(e))}(),u(document.getElementById("project-name").value),document.getElementById("project-error").textContent="",a(),document.getElementById("project-name").value=""):document.getElementById("project-error").textContent="Please enter Project Name"}))}))}()}()})();