(()=>{"use strict";function e(e,t){document.getElementById(e).appendChild(t)}function t(e){let t=document.createElement("div");!0===e.check&&(t.style.backgroundColor="cyan"),t.setAttribute("class","task-element"),t.setAttribute("id",`task-number-${e.task_number}`);let n=document.createElement("button");!0===e.check?n.innerHTML="":n.innerHTML='<span class="material-icons">\n        done\n        </span>',n.setAttribute("id",`check-${e.task_number}`),n.setAttribute("class","check");let o=document.createElement("div");o.setAttribute("id","title"),o.textContent=e.title;let r=document.createElement("div");r.setAttribute("id","description"),r.textContent=e.description;let c=document.createElement("div");c.setAttribute("id","duedate"),c.textContent=e.duedate;let u=document.createElement("div");u.setAttribute("id","priority"),u.textContent=e.priority;let a=document.createElement("button");a.setAttribute("id",`update-task-${e.task_number}`),a.setAttribute("class","updateTaskBtn"),a.innerHTML='<span class="material-icons" style="font-size:20px;">\n    edit\n    </span>';let l=document.createElement("button");return l.setAttribute("id",`close-task-${e.task_number}`),l.setAttribute("class","closeTaskBtn"),l.innerHTML='<span class="material-icons">\n    close\n    </span>',[n,o,r,c,u,a,l].forEach((e=>{t.appendChild(e)})),t}function n(){let n=1;for(document.getElementById("display-tasks").innerHTML="";localStorage.getItem(`${n}`);){let o=JSON.parse(localStorage.getItem(`${n}`));"Inbox"==o.project&&e("display-tasks",t(o)),n++}}class o{constructor(e,t,n,o,r,c,u="Inbox"){this.title=e,this.description=t,this.duedate=n,this.priority=o,this.check=r,this.task_number=c,this.project=u}}function r(){const e=document.querySelector("#task-container"),t=document.querySelector("#update-task-container");let r=1;function c(){return""!=document.querySelector("#update-task-container").querySelector("#task-title-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-description-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-due-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-priority-input").value&&{title:document.querySelector("#update-task-container").querySelector("#task-title-input").value,description:document.querySelector("#update-task-container").querySelector("#task-description-input").value,duedate:document.querySelector("#update-task-container").querySelector("#task-due-input").value,priority:document.querySelector("#update-task-container").querySelector("#task-priority-input").value,project:document.querySelector("#update-task-container").querySelector("#project-selection-input").value}}function u(e){localStorage.setItem(`${e.task_number}`,JSON.stringify(e))}function a(){document.querySelectorAll(".closeTaskBtn").forEach((e=>{e.addEventListener("click",(t=>{let n=e.id.split("-")[2];document.getElementById(`task-number-${n}`).remove(),function(e){localStorage.removeItem(e)}(n)}))}))}function l(){document.querySelectorAll(".updateTaskBtn")&&document.querySelectorAll(".updateTaskBtn").forEach((e=>{e.addEventListener("click",(n=>{let o=e.id.split("-")[2];(function(e){let t=document.getElementById(e).querySelector("#title").textContent,n=document.getElementById(e).querySelector("#description").textContent,o=document.getElementById(e).querySelector("#duedate").textContent,r=document.getElementById(e).querySelector("#priority").textContent,c=function(e){let t=JSON.parse(localStorage.getItem(`${e}`));return{title:t.title,description:t.description,duedate:t.duedate,priority:t.priority,check:t.check,num:t.task_number,project:t.project}}(e.split("-")[2]).project;document.querySelector("#update-task-container").querySelector("#task-title-input").value=t,document.querySelector("#update-task-container").querySelector("#task-description-input").value=n,document.querySelector("#update-task-container").querySelector("#task-due-input").value=o,document.querySelector("#update-task-container").querySelector("#task-priority-input").value=r,document.querySelector("#update-task-container").querySelector("#project-selection-input").value=c})(`task-number-${o}`),t.classList.add("show"),document.querySelector("#update-submit-task").addEventListener("click",(e=>{!1!==c()?(function(e,t){let n=JSON.parse(localStorage.getItem(`${e}`));n.title=t.title,n.description=t.description,n.duedate=t.duedate,n.priority=t.priority,n.project=t.project,localStorage.setItem(`${e}`,JSON.stringify(n))}(o,c()),function(e){let t=JSON.parse(localStorage.getItem(e));document.querySelector(`#task-number-${e}`).querySelector("#title").textContent=t.title,document.querySelector(`#task-number-${e}`).querySelector("#description").textContent=t.description,document.querySelector(`#task-number-${e}`).querySelector("#duedate").textContent=t.duedate,document.querySelector(`#task-number-${e}`).querySelector("#priority").textContent=t.priority}(o),i(),m("update-task-container")):d("update-task-container")}))}))}))}function i(){t.classList.remove("show")}function s(){e.classList.remove("show")}function d(e){document.getElementById(e).querySelector("#error-message").textContent="Please enter all the fields"}function m(e){document.getElementById(e).querySelector("#error-message").textContent=""}function p(){document.querySelector("#clear-tasks").classList.add("show")}function y(){document.querySelectorAll(".check").forEach((e=>e.addEventListener("click",(t=>{let n=e.id.split("-")[1];document.getElementById(`task-number-${n}`).style["background-color"]="cyan",document.getElementById(`check-${n}`).textContent="",function(e){let t=JSON.parse(localStorage.getItem(e));t.check=!0,u(t)}(n)}))))}return a(),l(),document.querySelector("#add-taskBtn").addEventListener("click",(t=>{e.classList.add("show")})),document.querySelector("#cancel-task").addEventListener("click",(e=>{s()})),document.querySelector("#update-cancel-task").addEventListener("click",(e=>{i()})),setTimeout(y(),100),document.querySelector("#submit-task").addEventListener("click",(e=>{1==!!(document.querySelector("#task-title-input").value&&document.querySelector("#task-description-input").value&&document.querySelector("#task-due-input").value&&document.querySelector("#task-priority-input").value)?(u(function(){let e={title:document.querySelector("#task-title-input").value,task_description:document.querySelector("#task-description-input").value,task_due:document.querySelector("#task-due-input").value,task_priority:document.querySelector("#task-priority-input").value,project:document.querySelector("#project-selection-input").value},t=new o(e.title,e.task_description,e.task_due,e.task_priority,!1,r,e.project);return r++,t}()),s(),n(),l(),y(),p(),document.querySelector("#task-title-input").value="",document.querySelector("#task-description-input").value="",document.querySelector("#task-due-input").value="",document.querySelector("#task-priority-input").value="",document.querySelector("#project-selection-input").value="Inbox",m("task-container"),a()):d("task-container")})),p(),function(){let e=1;document.querySelector("#clear-tasks").addEventListener("click",(t=>{for(;localStorage.getItem(`${e}`);)localStorage.removeItem(`${e}`),e++;r=1,n()}))}(),{task_number:r}}!function(){const o=document.querySelector("#submit-name"),c=document.querySelector("#modal-container");function u(){document.querySelector("#name").innerText=localStorage.username}localStorage.getItem("username")?u():(c.classList.add("show"),o.addEventListener("click",(e=>{let t=document.querySelector("#name-input").value;""==t&&(t="Guest"),localStorage.setItem("username",`${t}`),u(),c.classList.remove("show")}))),document.getElementById("inbox").addEventListener("click",(e=>{n()})),n(),r(),function(){let n=[];function o(e){let t=document.createElement("button");return t.setAttribute("id","project-number-1"),t.setAttribute("class","project-title"),t.style.height="30px",t.innerHTML=`<span class="material-icons">bookmarks </span> ${e}`,t}function r(){document.getElementById("project-container").classList.remove("show")}function c(t){let n=document.createElement("option");n.textContent=t,e("project-data-list",n)}!function(){if(localStorage.getItem("Projects")){document.getElementById("project-list").textContent="";let t=JSON.parse(localStorage.getItem("Projects"));for(let n=0;n<t.length;n++)e("project-list",o(t[n]))}}(),document.getElementById("cancel-project-Btn").addEventListener("click",(e=>{r()})),document.getElementById("add-projectBtn").addEventListener("click",(e=>{document.getElementById("project-container").classList.add("show")})),document.getElementById("clear-projects").addEventListener("click",(e=>{document.getElementById("project-list").textContent="",n=[],localStorage.removeItem("Projects"),function(){let e=document.querySelector("#project-data-list").children;for(let t=e.length-1;t>0;t--)e.item(t).remove()}()})),setTimeout((function(){if(localStorage.getItem("Projects")){let e=JSON.parse(localStorage.getItem("Projects"));for(let t=0;t<e.length;t++)c(e[t])}}),100),document.querySelectorAll(".project-title").forEach((n=>{n.addEventListener("click",(o=>{document.getElementById("display-tasks").textContent="";let r=n.textContent.replace("bookmarks  ",""),c=1;for(;localStorage.getItem(`${c}`);){let n=JSON.parse(localStorage.getItem(`${c}`));n.project==r&&e("display-tasks",t(n)),c++}}))})),document.querySelector("#add-projectBtn").addEventListener("click",(t=>{document.querySelector("#add-project-Btn").addEventListener("click",(t=>{""!=document.getElementById("project-name").value==1?(e("project-list",o(document.getElementById("project-name").value)),function(){let e=document.getElementById("project-name").value;n.push(e),localStorage.setItem("Projects",JSON.stringify(n))}(),c(document.getElementById("project-name").value),document.getElementById("project-error").textContent="",r(),document.getElementById("project-name").value=""):document.getElementById("project-error").textContent="Please enter Project Name"}))}))}()}()})();