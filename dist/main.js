(()=>{"use strict";function e(e,t){document.getElementById(e).appendChild(t)}function t(e){let t=document.createElement("div");!0===e.check&&(t.style.backgroundColor="cyan"),t.setAttribute("class","task-element"),t.setAttribute("id",`task-number-${e.task_number}`);let n=document.createElement("button");!0===e.check?n.innerHTML="":n.innerHTML='<span class="material-icons">\n        done\n        </span>',n.setAttribute("id",`check-${e.task_number}`),n.setAttribute("class","check");let r=document.createElement("div");r.setAttribute("id","title"),r.textContent=e.title;let o=document.createElement("div");o.setAttribute("id","description"),o.textContent=e.description;let c=document.createElement("div");c.setAttribute("id","duedate"),c.textContent=e.duedate;let a=document.createElement("div");a.setAttribute("id","priority"),a.textContent=e.priority;let l=document.createElement("button");l.setAttribute("id",`update-task-${e.task_number}`),l.setAttribute("class","updateTaskBtn"),l.innerHTML='<span class="material-icons" style="font-size:20px;">\n    edit\n    </span>';let u=document.createElement("button");return u.setAttribute("id",`close-task-${e.task_number}`),u.setAttribute("class","closeTaskBtn"),u.innerHTML='<span class="material-icons">\n    close\n    </span>',[n,r,o,c,a,l,u].forEach((e=>{t.appendChild(e)})),t}function n(){let n=1,r=JSON.parse(localStorage.getItem("task_number"));for(document.getElementById("display-tasks").innerHTML="";n<=r;){if(localStorage.getItem(`${n}`)){let r=JSON.parse(localStorage.getItem(`${n}`));"Inbox"==r.project&&e("display-tasks",t(r))}n++}}class r{constructor(e,t,n,r,o,c,a="Inbox"){this.title=e,this.description=t,this.duedate=n,this.priority=r,this.check=o,this.task_number=c,this.project=a}}function o(){const e=document.querySelector("#task-container"),t=document.querySelector("#update-task-container");let o=1;function c(){return""!=document.querySelector("#update-task-container").querySelector("#task-title-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-description-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-due-input").value&&""!=document.querySelector("#update-task-container").querySelector("#task-priority-input").value&&{title:document.querySelector("#update-task-container").querySelector("#task-title-input").value,description:document.querySelector("#update-task-container").querySelector("#task-description-input").value,duedate:document.querySelector("#update-task-container").querySelector("#task-due-input").value,priority:document.querySelector("#update-task-container").querySelector("#task-priority-input").value,project:document.querySelector("#update-task-container").querySelector("#project-selection-input").value}}function a(e){localStorage.setItem(`${e.task_number}`,JSON.stringify(e))}function l(){document.querySelectorAll(".closeTaskBtn").forEach((e=>{e.addEventListener("click",(t=>{let n=e.id.split("-")[2];document.getElementById(`task-number-${n}`).remove(),function(e){localStorage.removeItem(e)}(n)}))}))}function u(){document.querySelectorAll(".updateTaskBtn")&&document.querySelectorAll(".updateTaskBtn").forEach((e=>{e.addEventListener("click",(n=>{let r=e.id.split("-")[2];(function(e){let t=document.getElementById(e).querySelector("#title").textContent,n=document.getElementById(e).querySelector("#description").textContent,r=document.getElementById(e).querySelector("#duedate").textContent,o=document.getElementById(e).querySelector("#priority").textContent,c=function(e){let t=JSON.parse(localStorage.getItem(`${e}`));return{title:t.title,description:t.description,duedate:t.duedate,priority:t.priority,check:t.check,num:t.task_number,project:t.project}}(e.split("-")[2]).project;document.querySelector("#update-task-container").querySelector("#task-title-input").value=t,document.querySelector("#update-task-container").querySelector("#task-description-input").value=n,document.querySelector("#update-task-container").querySelector("#task-due-input").value=r,document.querySelector("#update-task-container").querySelector("#task-priority-input").value=o,document.querySelector("#update-task-container").querySelector("#project-selection-input").value=c})(`task-number-${r}`),t.classList.add("show"),document.querySelector("#update-submit-task").addEventListener("click",(e=>{!1!==c()?(function(e,t){let n=JSON.parse(localStorage.getItem(`${e}`));n.title=t.title,n.description=t.description,n.duedate=t.duedate,n.priority=t.priority,n.project=t.project,localStorage.setItem(`${e}`,JSON.stringify(n))}(r,c()),function(e){let t=JSON.parse(localStorage.getItem(`${e}`));document.querySelector(`#task-number-${e}`).querySelector("#title").textContent=t.title,document.querySelector(`#task-number-${e}`).querySelector("#description").textContent=t.description,document.querySelector(`#task-number-${e}`).querySelector("#duedate").textContent=t.duedate,document.querySelector(`#task-number-${e}`).querySelector("#priority").textContent=t.priority}(r),s(),m("update-task-container")):d("update-task-container")}))}))}))}function s(){t.classList.remove("show")}function i(){e.classList.remove("show")}function d(e){document.getElementById(e).querySelector("#error-message").textContent="Please enter all the fields"}function m(e){document.getElementById(e).querySelector("#error-message").textContent=""}function p(){document.querySelector("#clear-tasks").classList.add("show")}function y(){document.querySelectorAll(".check").forEach((e=>e.addEventListener("click",(t=>{let n=e.id.split("-")[1];document.getElementById(`task-number-${n}`).style["background-color"]="cyan",document.getElementById(`check-${n}`).textContent="",function(e){let t=JSON.parse(localStorage.getItem(`${e}`));t.check=!0,a(t)}(n)}))))}function k(){let e=1,t=JSON.parse(localStorage.getItem("task_number"));document.querySelector("#clear-tasks").addEventListener("click",(r=>{for(;e<=t;)localStorage.getItem(`${e}`)&&localStorage.removeItem(`${e}`),e++;t=1,localStorage.setItem("task_number","1"),n()}))}return l(),u(),document.querySelector("#add-taskBtn").addEventListener("click",(t=>{e.classList.add("show")})),document.querySelector("#cancel-task").addEventListener("click",(e=>{i()})),document.querySelector("#update-cancel-task").addEventListener("click",(e=>{s()})),setTimeout(y(),100),document.querySelector("#submit-task").addEventListener("click",(e=>{1==!!(document.querySelector("#task-title-input").value&&document.querySelector("#task-description-input").value&&document.querySelector("#task-due-input").value&&document.querySelector("#task-priority-input").value)?(a(function(){let e={title:document.querySelector("#task-title-input").value,task_description:document.querySelector("#task-description-input").value,task_due:document.querySelector("#task-due-input").value,task_priority:document.querySelector("#task-priority-input").value,project:document.querySelector("#project-selection-input").value},t=new r(e.title,e.task_description,e.task_due,e.task_priority,!1,o,e.project);return o++,localStorage.setItem("task_number",JSON.stringify(o)),t}()),i(),n(),u(),y(),p(),document.querySelector("#task-title-input").value="",document.querySelector("#task-description-input").value="",document.querySelector("#task-due-input").value="",document.querySelector("#task-priority-input").value="",document.querySelector("#project-selection-input").value="Inbox",m("task-container"),k()):d("task-container")})),p(),k(),{task_number:o,updateTasks:u,clearAllTasks:k,deleteTask:l}}!function(){const r=document.querySelector("#submit-name"),c=document.querySelector("#modal-container");function a(){document.querySelector("#name").innerText=localStorage.username}localStorage.getItem("username")?a():(c.classList.add("show"),r.addEventListener("click",(e=>{let t=document.querySelector("#name-input").value;""==t&&(t="Guest"),localStorage.setItem("username",`${t}`),a(),c.classList.remove("show")}))),n(),document.getElementById("inbox").addEventListener("click",(e=>{n(),o().updateTasks(),o().deleteTask()})),document.getElementById("today-tasks").addEventListener("click",(n=>{(function(){let n=1,r=JSON.parse(localStorage.getItem("task_number")),o=(new Date).toISOString().slice(0,10);for(document.getElementById("display-tasks").innerHTML="";n<=r;){if(localStorage.getItem(`${n}`)){let r=JSON.parse(localStorage.getItem(`${n}`));r.duedate==o&&e("display-tasks",t(r))}n++}})(),o().updateTasks()})),document.getElementById("weekly-tasks").addEventListener("click",(n=>{(function(){let n=1,r=JSON.parse(localStorage.getItem("task_number")),o=function(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear(),o=[];for(let e=0;e<7;e++){let e=r+"-"+n+"-"+t;o.push(e),t=parseInt(t),t++}return o}();for(document.getElementById("display-tasks").innerHTML="";n<=r;){if(localStorage.getItem(`${n}`)){let r=JSON.parse(localStorage.getItem(`${n}`));r.duedate!=o[0]&&r.duedate!=o[1]&&r.duedate!=o[2]&&r.duedate!=o[3]&&r.duedate!=o[4]&&r.duedate!=o[5]&&r.duedate!=o[6]||e("display-tasks",t(r))}n++}})(),o().updateTasks()})),o(),function(){let n=[];function r(e){let t=document.createElement("button");return t.setAttribute("id","project-number-1"),t.setAttribute("class","project-title"),t.style.height="30px",t.innerHTML=`<span class="material-icons">bookmarks </span> ${e}`,t}function c(){document.getElementById("project-container").classList.remove("show")}function a(t){let n=document.createElement("option");n.textContent=t,e("project-data-list",n)}!function(){if(localStorage.getItem("Projects")){document.getElementById("project-list").textContent="";let t=JSON.parse(localStorage.getItem("Projects"));for(let n=0;n<t.length;n++)e("project-list",r(t[n]))}}(),document.getElementById("cancel-project-Btn").addEventListener("click",(e=>{c()})),document.getElementById("add-projectBtn").addEventListener("click",(e=>{document.getElementById("project-container").classList.add("show")})),document.getElementById("clear-projects").addEventListener("click",(e=>{document.getElementById("project-list").textContent="",n=[],localStorage.removeItem("Projects"),function(){let e=document.querySelector("#project-data-list").children;for(let t=e.length-1;t>0;t--)e.item(t).remove()}()})),setTimeout((function(){if(localStorage.getItem("Projects")){let e=JSON.parse(localStorage.getItem("Projects"));for(let t=0;t<e.length;t++)a(e[t])}}),100),document.querySelectorAll(".project-title").forEach((n=>{n.addEventListener("click",(r=>{let c=JSON.parse(localStorage.getItem("task_number"));document.getElementById("display-tasks").textContent="";let a=n.textContent.replace("bookmarks  ",""),l=1;for(;l<=c;){if(localStorage.getItem(`${l}`)){let n=JSON.parse(localStorage.getItem(`${l}`));n.project==a&&e("display-tasks",t(n))}l++}o().updateTasks(),o().clearAllTasks(),o().deleteTask()}))})),document.querySelector("#add-projectBtn").addEventListener("click",(t=>{document.querySelector("#add-project-Btn").addEventListener("click",(t=>{""!=document.getElementById("project-name").value==1?(e("project-list",r(document.getElementById("project-name").value)),function(){let e=document.getElementById("project-name").value;n.push(e),localStorage.setItem("Projects",JSON.stringify(n))}(),a(document.getElementById("project-name").value),document.getElementById("project-error").textContent="",c(),document.getElementById("project-name").value=""):document.getElementById("project-error").textContent="Please enter Project Name"}))}))}()}()})();